<!DOCTYPE html>
<html lang="ja">

<!--

edit sport: 
1,Meta tag
2,local StyleSheet
3,content html
4,other Path

-->

<head><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans+SC:300" rel="stylesheet" />


    <!--OGP and Meta Tag-->

    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <title>{props.data.head.title}</title>
    <meta name="description" content={props.data.head.title} />

    <meta property="og:url" content={window.location.href} />
    <meta property="og:title" content={props.data.head.title} />
    <meta property="og:type" content={getType()} />
    <meta property="og:description" content={props.data.head.description} />
    <meta property="og:image" content={props.data.head.image} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="Team_Aoristos" />
    <meta poperty="og:site_name" content="Team Aoristos公式サイト" />
    <meta property="og:local" content="ja_JP" />

    <link rel="icon" sizes="16x16" href="../icon/s16.jpg" />
    <link rel="icon" sizes="32x32" href="../icon/s32.jpg" />
    <link rel="icon" sizes="48x48" href="../icon/s48.jpg" />
    <link rel="icon" sizes="62x62" href="../icon/s62.jpg" />
    <link rel="apple-touch-icon-precomposed" href="../icon/s150.jpg" />
    <link rel="msapplication-TileImage" content="../icon/s150.jpg" />
    <link rel="msapplication-TileColor" content="#FFFDFA" />

    <link rel="next" href={getNextPrev().nextUrl} />
    <link rel="prev" href={getNextPrev().prevUrl} />

    <!--OGP and Meta Tag finish-->
    <script>
        // デバイスを特定する関数
        function detectDevice() {
            const userAgent = navigator.userAgent.toLowerCase();
            if (userAgent.includes("mobile") || userAgent.includes("android") || userAgent.includes("iphone") || userAgent.includes("ipad")) {
                return 'mobile';
            } else {
                return 'desktop';
            }
        }

        // CSSファイルを読み込む関数
        function loadCSS(filename) {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = filename;
            document.head.appendChild(link);
        }

        // デバイスに応じてCSSを読み込む
        window.onload = function () {
            const device = detectDevice();
            if (device === 'mobile') {
                loadCSS('../mobile.css'); // モバイル用CSSファイルを読み込む
            } else {
                loadCSS('../desktop.css'); // デスクトップ用CSSファイルを読み込む
            }
        }
    </script>
    <style>
        /*here is local stylesheet*/
#commentForm {
      background-color: #f9f9f9;
      border: 1px solid #e0e0e0;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }
    #commentForm input, #commentForm textarea, #commentForm button {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #dddddd;
      border-radius: 4px;
      box-sizing: border-box;
    }
    #commentForm input, #commentForm textarea {
      background-color: #ffffff;
    }
    #commentForm button {
      background-color: #98c379;
      color: #ffffff;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #commentForm button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    #commentSection {
      background-color: #ffffff;
      border: 1px solid #e0e0e0;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
margin-bottom: 100px
    }
    .comment {
      border-bottom: 1px solid #e0e0e0;
      padding: 10px 0;
    }
    .comment:last-child {
      border-bottom: none;
    }
    .comment strong {
      color: #333333;
    }
    .comment small {
      color: #98c379;
    }
    .commentIntro h1{
font-family: Arial, sans-serif;
}
.commentIntro{
margin: 30px;
padding: 20px;
margin-top: 80px;
}
.commentIntro .attention{
color: red;
}

    </style>

    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P2FGWZ45');</script>
<!-- End Google Tag Manager --><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KHTZV1FK5S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KHTZV1FK5S');
</script>

    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "ngbklnykk6");
    </script>
    
</head>

<body id="bgimage"><div class="background"></div><div class="mainWrapper"><!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2FGWZ45"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <div class="constant">
        <nav>
            <img src="../icon.svg" alt="icon" />
            <h1>Team Aoristos</h1>
            <div class="hamburger">
                <ul>
                    <div class="openbtn"><span></span><span></span><span></span></div>
                    <nav id="g-nav">
                        <div id="g-nav-list"><!--ナビの数が増えた場合縦スクロールするためのdiv※不要なら削除-->
                            <ul class="g-nav-listUl">
                                <a href="../">Top</a>
                                <p>トップ</p>
                                <a href="../blog/">Blog</a>
                                <p>ブログ</p>
                                <a href="../member/">Member</a>
                                <p>メンバー紹介</p>
                                <a href="../contest/">Contest</a>
                                <p>コンテスト紹介</p>
                                <a href="../group/">Group</a>
                                <p>班についての紹介</p>
                                <a href="../comment/">Comment</a>
                                <p>コメント</p>
                                <a href="../intro/">Introduction</a>
                                <p>チームの紹介</p>
                                <a href="../trivia/">Trivia</a>
                                <p>毎日雑学</p>
                            </ul>
                        </div>
                    </nav>
                </ul>
            </div>
            <a href="../blog" class="last nav" class="nav">ブログ</a>
            <a href="../intro" class="nav">チームについて</a>
            <a href="../" class="nav">トップ</a>
        </nav>
    </div>

    <div class="content">
        <!--Here is content. edit here!-->
        <div class="commentIntro">
        <h1>コメント</h1>
        <p>フィードバック・質問等も受け付けています。<br>ぜひお願いいたします。</p>
        <p class="attention">※インターネットリテラシーに欠けるようなコメントはこちらから削除させていただきます。<br>ご了承ください。</p>
        </div>
        <form id="commentForm">
            <input type="text" id="usernameInput" placeholder="名前" required>
            <textarea id="commentInput" placeholder="コメント" required></textarea>
            <button type="submit">コメントを投稿する</button>
          </form>
          <div id="commentSection"></div>

    </div>

    <div class="contact">
        <hr />
        <h1>Contact</h1>
        <p>ご質問等あれば、遠慮なくこちらからお願いいたします。</p>
        <div class="contactBotton">
            <div class="xContact">
                <a class="xBotton" href="https://x.com/Team_Aoristos">公式XへDMする</a>
            </div>
            <div class="mailContact">
                <a class="mailBotton" href="mailto:sg.amr@outlook.jp">メールを送信する</a>
            </div>
        </div>
        <img src="" alt="">
        <hr />
    </div>

    <div class="sitemap">
        <h1>Site Map</h1>
        <a href="../">Top</a>
        トップ<br />
        <a href="../blog/">Blog</a>
        ブログ<br />
        <a href="../member/">Member</a>
        メンバー紹介<br />
        <a href="../contest/">Contest</a>
        コンテスト紹介<br />
        <a href="../group/">Group</a>
        班についての紹介<br />
        <a href="../comment/">Comment</a>
        コメント<br />
        <a href="../intro/">Introduction</a>
        チームの紹介<br />
        <a href="../trivia/">Trivia</a>
        毎日雑学<br />
        <img src="../sitemap-bgImage.jpeg" alt="blackbord picture" />
    </div>

    <div class="waveF"><canvas id="waveCanvas"></canvas></div<ul class="snsbtniti">

                
                <a href="https://x.com/Team_Aoristos" class="flowbtn my_x1">
                <i class="fa-brands fa-x-twitter"></i>
                <div>X</div>
                </a>
                
              
            
                <a href="https://instagram.com/team_aoristos" class="flowbtn my_instagram1">
                <i class="fa-brands fa-instagram"></i>
                <div>Instagram</div>
                </a>
                
      
            </ul>

    <p class="copyright">&copy; 2024 Team Aoristos</p>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <script src="../script.js"></script>
    <script>
        
    const form = document.getElementById('commentForm');
    const commentSection = document.getElementById('commentSection');
    let lastRowLoaded = 0;
    const GAS_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxnoBGiiOCTts9wboEBW_BPN8jRAa_Hka2WQGgq3AR9YnGK9wklYqE7lb9wqdngi2oI9w/exec';
    const displayedCommentIds = new Set();

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      const submitButton = this.querySelector('button[type="submit"]');
      submitButton.disabled = true;
      try {
        const comment = sanitizeInput(document.getElementById('commentInput').value);
        const username = sanitizeInput(document.getElementById('usernameInput').value);
        const response = await fetch(GAS_WEB_APP_URL, {
          method: 'POST',
          body: JSON.stringify({ username, comment })
        });
        if (response.ok) {
          form.reset();
          commentSection.innerHTML = '';
          displayedCommentIds.clear();
          lastRowLoaded = 0;
          loadComments();
        } else {
          throw new Error('Failed to post comment');
        }
      } catch (error) {
        console.log("error");
      } finally {
        submitButton.disabled = false;
      }
    });

    async function loadComments() {
      try {
        const response = await fetch(`${GAS_WEB_APP_URL}?start=${lastRowLoaded + 2}&numRows=10`);
        if (!response.ok) {
          throw new Error('Failed to load comments');
        }
        const comments = await response.json();
        comments.forEach(comment => {
          if (!displayedCommentIds.has(comment.id)) {
            displayedCommentIds.add(comment.id);
            displayComment(comment);
          }
        });
        lastRowLoaded += comments.length;
      } catch (error) {
        console.log("error");
      }
    }

    function displayComment(comment) {
      const div = document.createElement('div');
      div.classList.add('comment');
      div.innerHTML = `<strong>${comment.username}</strong> <small>(${new Date(comment.timestamp).toLocaleString()})</small><br>${sanitizeInput(comment.comment)}`;
      commentSection.appendChild(div);
    }

    function sanitizeInput(input) {
      const div = document.createElement('div');
      div.textContent = input;
      return div.innerHTML;
    }

    window.onscroll = function() {
      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
        loadComments();
      }
    };

    loadComments();
    </script>
</div></body>

</html>